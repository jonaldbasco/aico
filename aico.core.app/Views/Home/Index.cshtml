@{
    ViewData["Title"] = "Health Dashboard";
    var basicProfile = ViewBag.ExisingUser;
    var name = basicProfile?["BasicProfile"]?["Name"]?.ToString() ?? "Guest";
    var diseasesArray = ViewBag.Diseases as Newtonsoft.Json.Linq.JArray;
    var diseasesList = diseasesArray?.Select(d => d.ToString()).ToList() ?? new List<string> { "N/A" };
    var labTests = ViewBag.LabTestsSummary as Newtonsoft.Json.Linq.JArray;
    var consultsList = ViewBag.ConsultsSummary as Newtonsoft.Json.Linq.JArray;
}
<div id="root">
    <div role="region" aria-label="Notifications (F8)" tabindex="-1" style="pointer-events: none;">
        <ol tabindex="-1" class="fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]"></ol>
    </div>
    <div class="min-h-screen bg-gradient-to-br from-background via-primary/5 to-accent/10">
        <div class="relative overflow-hidden bg-gradient-to-r from-primary to-primary-glow">
            <div class="absolute inset-0 bg-cover bg-center opacity-20" style="background-image: url('/images/healthcare-hero.jpg')"></div>
            <div class="relative px-6 py-12">
                <div class="max-w-6xl mx-auto">
                    <div class="flex items-center gap-4 mb-4">
                        <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user w-6 h-6 text-white">
                                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                        </div>
                        <div>
                            <h1 class="text-3xl font-bold text-white mb-1">Welcome, @name!</h1>
                            <p class="text-white/80 text-lg">Your intelligent health companion is ready</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="max-w-6xl mx-auto px-6 py-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="rounded-lg text-card-foreground border-0 shadow-lg bg-white/80 backdrop-blur-sm">
                    <div class="flex flex-col space-y-1.5 p-6 pb-3">
                        <h3 class="font-semibold tracking-tight text-lg flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shield w-5 h-5 text-primary">
                                <path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"></path>
                            </svg>
                            Plan Coverage
                        </h3>
                    </div>
                    <div class="p-6 pt-0">
                        <div class="space-y-3">
                            <div class="flex justify-between items-center"><span class="text-sm text-muted-foreground">Available</span><span class="font-bold text-primary">₱127,500</span></div>
                            <div class="flex justify-between items-center"><span class="text-sm text-muted-foreground">Original</span><span class="text-sm">₱150,000</span></div>
                            <div aria-valuemax="100" aria-valuemin="0" role="progressbar" data-state="indeterminate" data-max="100" class="relative w-full overflow-hidden rounded-full bg-secondary h-2">
                                <div data-state="indeterminate" data-max="100" class="h-full w-full flex-1 bg-primary transition-all" style="transform: translateX(-15%);"></div>
                            </div>
                            <p class="text-xs text-muted-foreground">85.0% remaining</p>
                        </div>
                    </div>
                </div>
                <div class="rounded-lg text-card-foreground border-0 shadow-lg bg-white/80 backdrop-blur-sm">
                    <div class="flex flex-col space-y-1.5 p-6 pb-3">
                        <h3 class="font-semibold tracking-tight text-lg flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trending-up w-5 h-5 text-accent">
                                <polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline>
                                <polyline points="16 7 22 7 22 13"></polyline>
                            </svg>
                            Used This Year
                        </h3>
                    </div>
                    <div class="p-6 pt-0">
                        <div class="text-2xl font-bold text-accent mb-2">₱22,500</div>
                        <p class="text-sm text-muted-foreground">Recent: Dental cleaning (₱3,500)</p>
                    </div>
                </div>
                <div class="rounded-lg text-card-foreground border-0 shadow-lg bg-white/80 backdrop-blur-sm">
                    <div class="flex flex-col space-y-1.5 p-6 pb-3">
                        <h3 class="font-semibold tracking-tight text-lg flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart w-5 h-5 text-red-500">
                                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path>
                            </svg>
                            Health Status
                        </h3>
                    </div>
                    <div class="p-6 pt-0">
                        <div class="flex items-start justify-between ">
                            <span class="badge bg-outline-succcess rounded-full">Success</span>
                            <div class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent hover:bg-secondary/80 bg-accent/20 text-accent">Active</div>
                            @foreach (var disease in diseasesList)
                            {
                                <div class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground">@disease</div>
                            }
                        </div>
                        <p class="text-sm text-muted-foreground">Last checkup: 3 months ago</p>
                    </div>
                </div>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="rounded-lg text-card-foreground border-0 shadow-lg bg-white/80 backdrop-blur-sm">
                    <div class="flex flex-col space-y-1.5 p-6">
                        <h3 class="text-2xl font-semibold leading-none tracking-tight flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shield w-5 h-5 text-primary">
                                <path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"></path>
                            </svg>
                            Maxicare EReady Plus
                        </h3>
                        <p class="text-sm text-muted-foreground">Your Maxicare health plan details and benefits</p>
                    </div>
                    <div class="p-6 pt-0 space-y-4">
                        <div class="bg-primary/5 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">Coverage Benefits</h4>
                            <ul class="text-sm space-y-1 text-muted-foreground">
                                <li>• In-patient hospitalization</li>
                                <li>• Out-patient consultations</li>
                                <li>• Emergency care coverage</li>
                                <li>• Diagnostic tests and procedures</li>
                            </ul>
                        </div>
                        <button id="btnFindProv" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-gradient-to-r from-primary to-primary-glow text-primary-foreground hover:shadow-xl hover:scale-105 border-0 h-10 px-4 py-2 w-full" fdprocessedid="aohcxe">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-map-pin w-4 h-4 mr-2">
                                <path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                            Find Healthcare Providers
                        </button>
                    </div>
                </div>
                <div class="rounded-lg text-card-foreground border-0 shadow-lg bg-white/80 backdrop-blur-sm">
                    <div class="flex flex-col space-y-1.5 p-6">
                        <h3 class="text-2xl font-semibold leading-none tracking-tight flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bell w-5 h-5 text-accent">
                                <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path>
                                <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"></path>
                            </svg>
                            Health Monitoring
                        </h3>
                        <p class="text-sm text-muted-foreground">Recommended check-ups and health reminders</p>
                    </div>
                    <div class="p-6 pt0 space-y-4">
                        @foreach (var lab in labTests!)
                        {
                            <div class="p-4 rounded-lg border-l-4 border-orange-400 bg-orange-50">
                                <div class="flex items-start justify-between">
                                    <div>
                                        <h4 class="font-semibold text-sm mb-1">@lab["LabTest_Name"]</h4>
                                        <p class="text-sm text-muted-foreground mb-2">@lab["Description"]</p>
                                        <div class="flex items-center gap-1 text-xs text-muted-foreground">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar w-3 h-3">
                                                <path d="M8 2v4"></path>
                                                <path d="M16 2v4"></path>
                                                <rect width="18" height="18" x="3" y="4" rx="2"></rect>
                                                <path d="M3 10h18"></path>
                                            </svg>
                                            Next week
                                        </div>
                                    </div>
                                    <div class="inline-flex items-center rounded-full border px-2.5 py-0.5 font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80 text-xs">medium</div>
                                </div>
                            </div>
                        }
                        
                            @foreach (var item in consultsList!)
                            {
                            <div class="p-4 rounded-lg border-l-4 border-blue-400 bg-blue-50">
                                <div class="flex items-start justify-between">
                                    <div>
                                        <h4 class="font-semibold text-sm mb-1">@item["Checkup_Name"]</h4>
                                        <p class="text-sm text-muted-foreground mb-2">@item["Description"]</p>
                                        <div class="flex items-center gap-1 text-xs text-muted-foreground">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar w-3 h-3">
                                                <path d="M8 2v4"></path>
                                                <path d="M16 2v4"></path>
                                                <rect width="18" height="18" x="3" y="4" rx="2"></rect>
                                                <path d="M3 10h18"></path>
                                            </svg>
                                            This month
                                        </div>
                                    </div>
                                    <span class="badge bg-info rounded-pill">low</span>
                                    @* <div class="inline-flex items-center rounded-full border px-2.5 py-0.5 font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80 text-xs">low</div> *@
                                </div>
                            </div>
                            }
                        <button id="btnAIReco" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-accent text-accent-foreground hover:bg-accent/90 shadow-md hover:shadow-lg hover:scale-105 h-10 px-4 py-2 w-full" fdprocessedid="gikows">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-activity w-4 h-4 mr-2">
                                <path d="M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"></path>
                            </svg>
                            Get AI Recommendations
                        </button>
                    </div>
                </div>
            </div>
            <div class="rounded-lg text-card-foreground border-0 shadow-lg bg-white/80 backdrop-blur-sm mt-8">
                <div class="flex flex-col space-y-1.5 p-6">
                    <h3 class="text-2xl font-semibold leading-none tracking-tight flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user w-5 h-5 text-primary">
                            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        Member Information
                    </h3>
                </div>
                <div class="p-6 pt-0">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-3">
                            <div>
                                <label class="text-sm font-medium text-muted-foreground">Location</label>
                                <p class="text-sm">Binan City</p>
                            </div>
                            <div>
                                <label class="text-sm font-medium text-muted-foreground">Contact</label>
                                <p class="text-sm">09276209788</p>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div>
                                <label class="text-sm font-medium text-muted-foreground">Chronic Conditions</label>
                                <p class="text-sm">Heart Disease</p>
                            </div>
                            <div>
                                <label class="text-sm font-medium text-muted-foreground">Current Interest</label>
                                <p class="text-sm">Blood Test (CBC)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        // Your jQuery code here will execute once the DOM is ready.
        console.log("The document is read");

        // Example: Attach a click handler to a button
        $("#btnFindProv").click(function() {
            var newUrl = '@Url.Action("Index", "HealthProv")'; //, new { param1 = value1, param2 = value2 })';
            window.location.href = newUrl;
        });

        $("#btnAIReco").click(function() {
            var newUrl = '@Url.Action("Index", "AIRecommend")'; //, new { param1 = value1, param2 = value2 })';
            window.location.href = newUrl;
        });
    });
</script>
